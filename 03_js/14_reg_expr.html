<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <script>

    /*
      정규식 (regular expression)

      1. 어떤 문자열이 특정 패턴을 가지고 있는지 확인하기 위한 표현식이다
      2. JavaScript 정규식 표현 방법
        /정규식/
      3. JavaScript 정규식 메소드
        /정규식/.test(문자열) : 정규식 패턴을 가지고 있으면 true 반환, 아니면 false 반환
      4. 공백없이 작성할 것
    */
  </script>

  <script>
    /*
      정규식 메타 문자

      1. 정규식에서 특별한 의미를 가진 문자를 의미한다.
      2. 주요 메타 문자
        1) . 
          (1) 모든 단일문자 (. 자리에 모든 문자가 들어올 수 있다.)
          (2) b.at : baat, bbat, bcat, bdat, ... (bat, baaat 불가)
        2) *
          (1) 0개 이상의 반복 문자
          (2) goo* : go,        god,                good,       gooood, ... ( go(o*) )
                     (o 0개)    (o 대신 다른문자)   (o 1번)     (o 여러번)
        3) +
          (1) 1개 이상의 반복 문자 
          (2) goo+ : goo(O), good(O), gooood(O), ...      ( go(o+), go 불가 )
        4) ^
          (1) 시작이 일치하는 문자
          (2) ^a : app, apple, asia, africa, ...
        5) $
          (1) 끝이 일치하는 문자
          (2) end$ : end, the end, ... (ending 불가)
        6) ?
          (1) 0개 또는 1개의 문자
          (2) colou?r : color, colour  ( colo(u?)r u가 0개 또는 1개)
        7) ()
          (1) 괄호 내의 문자를 문자 패턴으로 간주. 그룹이라고도 함
          (2) (app)A? : appA, appappA, appappappA, ... ( (app)A?)
        8) |
          (1) 또는
          (2) a(b|c) : ab, ac
        9) \
          (1) 이스케이프, 역슬래시 뒤에 오는 메타 문자를 일반 문자로 간주
          (2) \*, \., \?, \$, \^, ...
        10) {m}
          (1) 정확히 m개 문자 (0 <= m <= 255)
          (2) a{3} : aaa
        11) {m,}
          (1) m개 이상 문자   (0 <= m <= 255)
          (2) a{3,} : aaa, aaaa, aaaaa, ... 
        12) {m, n}
          (1) m개 이상 n개 이하 (0 <= m <= 255, m < n <= 255)
          (2) a{2, 3} : aa, aaa
    */

  </script>

  <div id="div1">
    <input type="text">
    <button type="button" onclick="myFunc1()">검사</button>
  </div>

  <script>

    function myFunc1() {
      var regExpr = /^b.at$/;
      if(regExpr.test(document.querySelector('#div1 > input').value)){
        alert('패턴일치');
      }else{
        alert('패턴불일치');
      } 
    }
  
  </script>


  <script>

    /*
      대괄호 표현식

      1. 단일 문자 또는 조합 요소를 나타낼 때 사용한다.
      2. 사용 방법 예시
        1) [.]     : 문자 .
        2) [a]     : 문자 a
        3) [ab]    : 문자 a 또는 문자 b
           NO, No, nO, no => [Nn][Oo]
        4) [^a]    : 문자 a가 아닌 모든 문자
           ^[a]    : 문자 a로 시작
        5) [a-d]   : 문자 a부터 문자 d까지 (a, b, c, d 중 하나)
           [a-]    : 문자 a 또는 문자 - (3번처럼 인식)
           [-a]    : 문자 - 또는 문자 a
           [가-힣] : 모든 한글
        6) [][ab]  : 문자 [ 또는 문자 ] 또는 문자 a 또는 문자 b
    */

  </script>

  <div id="div2">
    <input type="text">
    <button type="button" onclick="myFunc2()">검사</button>
  </div>

  <script>

    function myFunc2(){
      var regExpr = /^[A-Za-z]+$/;    // + : 반드시 1글자는 입력, * : 입력이 없어도 됨 
      if(regExpr.test(document.querySelector('#div2 > input').value)){
        alert('패턴 일치');
      } else{
        alert('패턴 불일치');
      }
    }

  </script>

  <script>
    
    // 숫자
    var regNumber = /[0-9]/;

    // 알파벳
    var regAlphabet = /[A-Za-z]/;

    // 한글
    var regHangul = /[ㄱ-ㅣ가-힣]/; // [ㄱ-ㅣ] 자음부터 모음까지
    
    // 특수문자
    var regSpecial = /[^0-9A-Za-z]/; // 특수문자 = 숫자, 영어 뺀 나머지

  </script>

  <script>

    // 클래스명
    var regClass = /[A-Z][A-Za-z0-9_$]*/;     // 대문자 시작, 나머지는 대소문자, 숫자, 특수기호

    // 변수, 메소드명
    var regVariable = /[a-z][A-Za-z0-9_$]*/;  // 소문자시작, 나머지는 대소문자, 숫자, 특수기호

    // 상수
    var regFinal = /[A-Z][A-Z0-9_$]+/;    // 대문자시작, 나머지는 대문자, 숫자, 특수기호

  </script>

  <hr>

  <div id ="div3">
    <input type="text">
    <button type="button" onclick="myFunc3()">검사</button>
  </div>
  <script>

    function myFunc3(){
      
      /* 이메일
      var inp = document.querySelector('#div3 > input').value;

      var regEmail = /^[A-Za-z0-9-_]{2,}@[A-Za-z0-9]{2,}(\.[A-Za-z]{2,6}){1,2}$/;     // {2,} : 2글자 이상

      if(regEmail.test(inp)){
        alert('Email 맞다');
      } else {
        alert('Email 아니다');
      }
      */

      /* 비밀번호
      // 8~16 자의 영문 대/소문자, 숫자, 특수문자를 3개 이상 사용해 주세요
      var length = inp.length;
      
      var passCount = /[A-Z]/.test(inp)           //   대문자가 포함되면 true 반환 (true는 1로 처리함)
                    + /[a-z]/.test(inp)           //   소문자가 포함되면 true 반환 (true는 1로 처리함)
                    + /[0-9]/.test(inp)           //     숫자가 포함되면 true 반환 (true는 1로 처리함)
                    + /[^A-Za-z0-9]/.test(inp);   // 특수문자가 포함되면 true 반환 (true는 1로 처리함)

      if( length >= 8 && length <= 16 && passCount >= 3 ) {
        alert('PW 맞다');
      } else{
        alert('PW 아니다');
      }
      */
      
      /* 아이디
      // var regId = /([a-z]|[0-9]|_|-){5,20}/;   // 내가 푼 것
      var regId = /^[a-z0-9-_]{5,20}$/;
      if(regId.test(inp)){
        alert('OK');
      } else{
        alert('NG');
      }
      */

      /* IP주소

      //var regIpAddr = /[0-2]?[0-5]?[0-5].[0-2]?[0-5]?[0-5].[0-2]?[0-5]?[0-5]/;     // 192.168.0.255 내가 푼 것

      //var regIpAddr = /^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/;     // 숫자들의 개수만 맞춤. 숫자 범위는 맞추지 않음
      //var regIpAddr = /^([0-9]{1,3}\.){3}[0-9]{1,3}$/;     // 같은 반복 표현인 [0-9]{1,3}\. 을 괄호로 묶음

      // ([0-9]{2}) = 0~99, (1[0-9]{2}) = 100~199, (2[0-4][0-9]) = 200~249, (25[0-5]) = 250~255
      var regIpAddr = /^((([0-9]{1,2})|(1[0-9]{2})|(2[0-4][0-9])|(25[0-5]))\.){3}(([0-9]{1,2})|(1[0-9]{2})|(2[0-4][0-9])|(25[0-5]))$/;     
      
      if(regIpAddr.test(inp)){
        alert('IP주소 맞다');
      } else{
        alert('IP주소 아니다');
      }
      */

      /* 휴대전화
      var regMobile = /^010-{0,1}[0-9]{4}-{0,1}[0-9]{4}$/;    // 010으로 시작, 하이픈(-)있거나 없거나, 숫자 4자리씩
      if(regMobile.test(inp)){
        alert('휴대전화 맞다');
      } else{
        alert('휴대전화 아니다');
      }
      */

    }

  </script>
  <hr>

  <form id="frm-join"
        action="/server/somwhere"
        method="post">
    <div>
      <label for="id">아이디</label>
      <input type="text" id="id" name="id">
    </div>
    <div>
      <label for="pw">비밀번호</label>
      <input type="password" id="pw" name="pw">
    </div>
    <div>
      <label for="pw-check">비밀번호 확인</label>
      <input type="password" id="pw-check">
    </div>
    <div>
      <label for="email">이메일</label>
      <input type="text" id="email" name="email">
    </div>
    <div>
      <button type="submit">가입</button>
      <button type="reset">다시작성</button>
    </div>
  </form>


  <script>


    // 전역 변수
    var validId = false;
    var validPw = false;
    var validPwCheck = false;
    var validEmail = false;

    // 함수 선언
    function fnValidId(){
      return /^[a-z0-9-_]{5,20}$/.test(document.getElementById('id').value);
    }

    function fnValidPw(){
      var inpPw = document.getElementById('pw').value;
      var length = inpPw.length;
      var passCount = /[A-Z]/.test(inpPw)           
                    + /[a-z]/.test(inpPw)           
                    + /[0-9]/.test(inpPw)           
                    + /[^A-Za-z0-9]/.test(inpPw);  
      return length >= 8 && length <= 16 && passCount >= 3;
    }

    function fnValidPwCheck(){
      var inpPw = document.getElementById('pw').value;
      var inpPwCheck = document.getElementById('pw-check').value;
      return inpPw.length != 0 && inpPw === inpPwCheck;   // 빈문자열이면 안되니까 inpPw.length != 0
    }

    function fnValidEmail(){
      return /^[A-Za-z0-9-_]{2,}@[A-Za-z0-9]{2,}(\.[A-Za-z]{2,6}){1,2}$/.test(document.getElementById('email').value);
    }

    // 함수 호출 & 이벤트

    document.getElementById('frm-join').addEventListener('submit', function(evt){
      validId = fnValidId();
      validPw = fnValidPw();
      validPwCheck = fnValidPwCheck();
      validEmail =fnValidEmail();

      if(!validId) {
        alert('아이디를 확인하세요');
        evt.preventDefault();         // 서브밋 취소하기
        return;                       // 이벤트 종료하기
      } else if(!validPw || !validPwCheck){
        alert('비밀번호를 확인하세요');
        evt.preventDefault();
        return;
      } else if(!validEmail){
        alert('이메일을 확인하세요')
        evt.preventDefault();
        return;
      }

    })


    /* 내가 푼 것
    document.querySelector('form').addEventListener('click', function (evt){
      var inpId = document.getElementById('id').value;
      var regId = /^[a-z0-9-_]{5,20}$/;
      if(!regId.test(inpId)){
        alert('아이디 양식을 다시 확인해주세요');
        evt.preventDefault();
      }

      var inpPw = document.getElementById('pw').value;
      var length = inpPw.length;
      var pwCheck = document.getElementById('pw-check').value;
      var passCount = /[A-Z]/.test(inpPw)           //   대문자가 포함되면 true 반환 (true는 1로 처리함)
                    + /[a-z]/.test(inpPw)           //   소문자가 포함되면 true 반환 (true는 1로 처리함)
                    + /[0-9]/.test(inpPw)           //     숫자가 포함되면 true 반환 (true는 1로 처리함)
                    + /[^A-Za-z0-9]/.test(inpPw);   // 특수문자가 포함되면 true 반환 (true는 1로 처리함)

      if( !(length >= 8 && length <= 16 && passCount >= 3)) {
        alert('비밀번호 양식을 다시 확인해주세요');
        evt.preventDefault();
      }

      if ( inpPw !== pwCheck ){
        evt.preventDefault();
        alert('비밀번호가 일치하지 않습니다.');
      }

      var inpEmail = document.getElementById('email').value;

      var regEmail = /^[A-Za-z0-9-_]{2,}@[A-Za-z0-9]{2,}(\.[A-Za-z]{2,6}){1,2}$/;     // {2,} : 2글자 이상

      if(!regEmail.test(inpEmail)){
        evt.preventDefault();
        alert('Email 양식을 다시 확인해주세요');
      }
    })
    */
  

  </script>
</body>
</html>